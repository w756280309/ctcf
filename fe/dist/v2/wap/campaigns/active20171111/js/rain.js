function redPack(e){this.el=e.el,this.rains=[],this.speed=e.speed,this.density=e.density,this.callback=e.callback}redPack.prototype.create=function(e,t){var a=this.el,r=this,n=!0,s=document.createDocumentFragment(),c=document.createElement("span");c.setAttribute("redId",e),c.setAttribute("redClassName",t),c.className=t,c.style.left=Math.random()*(a.clientWidth-30)+"px",c.style.top=-a.clientHeight/10+"px",s.appendChild(c),a.appendChild(s),this.rains.push(c),this.move(c);var i=function(e){if(n===!0){e.target.className="redPackNone",r.callback(e),n=!1}};document.addEventListener("touchstart",function(e){if("redpack"===e.target.className||"gold-redpack"===e.target.className)i(e);else{if("0"!==e.target.getAttribute("redAmount"))return!1;e.target.className="redPackNone"}})},redPack.prototype.start=function(e){var t=this,a=0;t.timer=setInterval(function(){if(a<=e.length-1){var r=e[a].id,n=e[a].className;t.create(r,n),a++}},t.density)},redPack.prototype.stop=function(){var e=this;clearInterval(e.timer);for(var t=0;t<e.rains.length;t++)clearInterval(e.rains[t].timer)},redPack.prototype.move=function(e){var t=this.el,a=this,r=Math.random()+1,n=Math.random();e.timer=setInterval(function(){e.style.left=r>1.5?parseInt(e.style.left)+parseInt(n*e.clientHeight/30)+"px":parseInt(e.style.left)-parseInt(n*e.clientHeight/30)+"px",e.style.top=parseInt(e.style.top)+parseInt(r*e.clientHeight/20)+"px",t.clientHeight<parseInt(e.style.top)&&(clearInterval(e.timer),t.removeChild(e))},a.speed)},redPack.prototype.clear=function(){for(var e=this.el,t=e,a=t.childNodes,r=a.length-1;r>=0;r--)t.removeChild(a[r])},redPack.prototype.ajax=function(e){e=e||{},e.method=null==e.method?"GET":e.method.toUpperCase(),e.url=e.url||"",e.async=e.async||!0,e.data=e.data||null,e.success=e.success||function(){};var t=null;t=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var a=[];for(var r in e.data)a.push(r+"="+e.data[r]);var n=a.join("&");"POST"===e.method.toUpperCase()?(t.open(e.method,e.url,e.async),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),t.send(n)):"GET"===e.method.toUpperCase()&&(t.open(e.method,e.url+"?"+n,e.async),t.send(null)),t.onreadystatechange=function(){4===t.readyState&&200===t.status&&e.success(t.responseText)}};