function validateForm(){var t=$("#iphone").val();if(""===t)return"手机号不能为空";var e=/^0?1[3|4|5|6|7|8][0-9]\d{8}$/;if(!e.test(t))return"手机号格式错误";var a=$("#captchaform-captchacode").val();if(""===a)return"图形验证码不能为空";if(4!==a.length)return"图形验证码必须为4位字符";var n=$("#yanzhengma").val();if(""===n)return"短信验证码不能为空";if(6!==n.length)return"手机验证码必须为6位字符";var i=$("#pass").val();if(""===i)return"密码不能为空";if(i.length<6)return"密码长度最少6位";var e=/[a-zA-Z]/,s=/[0-9]/;return-1===i.indexOf(" ")&&e.test(i)&&s.test(i)?"checked"!==$("#xieyi").attr("checked")?"请查看网站服务协议":"":"请至少输入字母与数字组合"}function signup(){var t=$("#signup_form"),e=$.post(t.attr("action"),t.serialize());e.done(function(t){$("#signup-btn").attr("disabled",!1),t.code&&("undefined"!=typeof t.tourl?toastCenter(t.message,function(){location.href=t.tourl}):"undefined"!=typeof t.message&&toastCenter(t.message))}),e.fail(function(){toastCenter("网络繁忙, 请稍后重试!"),$("#signup-btn").attr("disabled",!1)})}$(function(){function t(){0===n?(window.clearInterval(a),$("#yzm").removeAttr("disabled"),$("#yzm").removeClass("yzm-disabled"),$("#yzm").val("重新发送")):(n--,$("#yzm").val(n+"s后重发"))}function e(){n=i,$("#yzm").addClass("yzm-disabled"),$("#yzm").attr("disabled","true"),$("#yzm").val(n+"s后重发"),a=window.setInterval(t,1e3)}FastClick.attach(document.body),$(".field-captchaform-captchacode").css("float","left"),$(".content-picture").on("click",function(){$(this).parents(".fixed-box").hide().siblings(".fixed-float").hide()}),$("input.login-info").focus(function(){$(this).css("color","#000")}),$("input.login-info").blur(function(){$(this).css("color","")}),$("#signup_form").submit(function(t){t.preventDefault(),$("#signup-btn").attr("disabled",!0);var e=validateForm();return""!==e?(toastCenter(e,function(){$("#signup-btn").attr("disabled",!1)}),!1):void signup()}),$(".password img").on("click",function(){"password"===$("#pass").attr("type")?($("#pass").attr("type","text"),$(this).removeAttr("src","/images/eye-close.png"),$(this).attr({src:"/images/eye-open.png",alt:"eye-open"})):($("#pass").attr("type","password"),$(this).removeAttr("src","/images/eye-open.png"),$(this).attr({src:"/images/eye-close.png",alt:"eye-close"}))}),$("#xieyi").bind("click",function(){"checked"===$(this).attr("checked")?$(this).attr("checked",!1):$(this).attr("checked",!0)});var a,n,i=60;$("#yzm").on("click",function(){return msg="",""===$("#captchaform-captchacode").val()?msg="图形验证码不能为空":4!==$("#captchaform-captchacode").val().length&&(msg="图形验证码必须为4位字符"),""!==msg?(toastCenter(msg),!1):void createSms("#iphone",1,"#captchaform-captchacode",function(){e()})})});