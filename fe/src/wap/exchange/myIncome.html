<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>资产总览</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="../common/css/wenjfbase.css">
    <link rel="stylesheet" href="../common/css/activeComHeader.css">
    <link rel="stylesheet" href="css/index.css">
    <script src="../libs/lib.flexible3.js"></script>
    <script src="../libs/zepto.min.js"></script>
</head>
<body>
<div class="flex-content">
    <div class="topTitle f18">
        <img class="goback lf" src="../tie-card/img/back.png" alt="" onclick="history.go(-1)">
        兑换记录
    </div>
    <div class="exchange-record">
        <ul id="exchange-list">
            <li class="clearfix">
                <div class="lf"><p>20元面值代金券</p><p>2016-12-11  12:39:03</p></div>
                <span class="lf"><i>25</i>积分</span>
                <button class="rg eschanging">领取</button>
            </li>
            <li class="clearfix">
                <div class="lf"><p>20元面值代金券</p><p>2016-12-11  12:39:03</p></div>
                <span class="lf"><i>25</i>积分</span>
                <button class="rg eschanged">领取</button>
            </li>
            <li class="clearfix">
                <div class="lf"><p>20元面20元面值代金券值代金券</p><p>2016-12-11  12:39:03</p></div>
                <span class="lf"><i>25</i>积分</span>
                <button class="rg eschanged">领取</button>
            </li>
        </ul>
    </div>
    <div id="pullUp">
        <span class="pullUpLabel f15">加载更多...</span>
    </div>
</div>

<script type="text/javascript">
    var flag = true ;
    //自动加载分页数据
    $(window).scroll(function () {
        //当内容滚动到底部时加载新的内容
        if ($(this).scrollTop() + $(window).height() + 20 >= $(document).height() && $(this).scrollTop() > 20) {
            //当前要加载的页码
            getPageList();
        }
    });
    function getPageList(){
        if(flag===true){
            //模拟ajax请求
            flag=false;
            var i,html='';
//        $("#pullUp").show();
            console.log(1);
            setTimeout(function(){
                for(i=0 ; i<10 ; i++){
                    html += '<li class="clearfix"><div class="lf"><p>20元面值代金券</p><p>2016-12-11  12:39:03</p></div> <span class="ctn"><i>25</i>积分</span> <button class="rg eschanged">领取</button> </li>';
                };
                $("#exchange-list").append(html);
                flag=true;
            },100);
        }
    }
</script>
</body>
</html>